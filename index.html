<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Google Search Console Verification Meta Tag -->
  <meta name="google-site-verification" content="3iM4RS8iUYrjsUirdaXXeHrTv7AHj9sqmrU6jifDWDo" />

  <title>Online Image Compressor &amp; Resizer | Free Photo Tools</title>
  <meta
    name="description"
    content="Quickly compress and resize your images online for free. Perfect for photos, signatures, and more!"
  >
  <meta
    name="keywords"
    content="online image compressor, photo resizer, compress images, resize photos, image size reducer"
  >

  <!-- Optional Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
    rel="stylesheet"
  >

  <!-- Font Awesome (for social media icons) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    integrity="sha512-jQe3cLQOsAsb3L41b8vKZkZp+jNWsWTHh5XMoImZbVez2icd2FzVsaBco6KZ9S2UxaYIVue38dJY9pMB8FpwBw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <style>
    :root {
      /* Light Mode BG */
      --bg-light: url("background.jpg") no-repeat center center fixed;
      --overlay-light: none;
      --text-color-light: #333;
      --container-bg-light: rgba(255, 255, 255, 0.85);

      /* Dark Mode BG */
      --bg-dark: url("background-dark.webp") no-repeat center center fixed;
      --overlay-dark: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2));
      --text-color-dark: #ddd;
      --container-bg-dark: rgba(0, 0, 0, 0.5);

      /* Shared Colors */
      --border-color: #aaa;
      --highlight-border: #66a6ff;
      --link-color: #008080;
      --dropzone-bg: #f9f9f9;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Roboto', sans-serif;
      color: var(--text-color-light);
      background: var(--overlay-light), var(--bg-light);
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      transition: color 0.3s ease;
    }
    .dark-mode {
      color: var(--text-color-dark);
      background: var(--overlay-dark), var(--bg-dark);
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: var(--container-bg-light);
      padding: 20px;
      border-radius: 8px;
      margin-top: 20px;
      transition: background-color 0.3s ease;
    }
    .dark-mode .container {
      background-color: var(--container-bg-dark);
    }

    /* The top bar with Dark Mode + Language Select */
    .top-bar {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    #themeToggle {
      background: #666;
      color: #fff;
      border: none;
      padding: 8px 14px;
      border-radius: 4px;
      cursor: pointer;
    }
    #themeToggle:hover {
      background: #555;
    }

    #languageSelect {
      padding: 5px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    .dark-mode #languageSelect {
      background: #444;
      color: #fff;
      border: 1px solid #666;
    }

    h1 {
      text-align: center; /* ensures main heading is fully centered */
      margin-bottom: 20px;
      font-size: 200%;
    }

    .note {
      font-size: 14px;
      text-align: center;
      margin-bottom: 20px;
    }

    .grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group {
      background: #f1f1f1;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: background-color 0.3s ease;
    }
    .dark-mode .form-group {
      background: #444;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .dark-mode label {
      color: var(--text-color-dark);
    }

    input[type="text"],
    input[type="number"],
    input[type="file"] {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 14px;
      box-sizing: border-box;
      color: #333;
    }

    #resizeBtn, #downloadBtn {
      display: block;
      margin: 10px auto;
      padding: 12px 20px;
      font-size: 16px;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    #resizeBtn {
      background: #66a6ff;
    }
    #resizeBtn:hover {
      background: #5595e6;
    }
    #resizeBtn:disabled {
      background: #aaa;
      cursor: not-allowed;
    }

    #downloadBtn {
      background: #4CAF50;
      display: none;
    }
    #downloadBtn:hover {
      background: #43a047;
    }

    .intro-text {
      font-size: 80%;
      margin-bottom: 20px;
    }

    .faq-section {
      margin-top: 40px;
      font-size: 75%;
    }

    /* Share section styling (with icons) */
    .share-section {
      margin-top: 30px;
      text-align: center;
    }
    .share-section p {
      margin-bottom: 10px;
      font-weight: 500;
    }
    .share-section a {
      margin: 0 8px;
      color: #0066cc;
      text-decoration: none;
      font-weight: 500;
    }
    .share-section a i {
      margin-right: 4px;
    }
    .dark-mode .share-section a {
      color: #66ffd2;
    }

    .other-site-link {
      margin-top: 30px;
      padding: 15px;
      background: #f0fff0;
      border-radius: 6px;
      text-align: center;
      font-size: 0.95rem;
      transition: background-color 0.3s ease;
    }
    .dark-mode .other-site-link {
      background: #2f4f4f;
    }
    .other-site-link a {
      color: var(--link-color);
      font-weight: bold;
      transition: color 0.3s ease;
    }
    .dark-mode .other-site-link a {
      color: #66ffd2;
    }

    #dropZone {
      margin-top: 10px;
      border: 2px dashed var(--border-color);
      border-radius: 6px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      background-color: var(--dropzone-bg);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .dark-mode #dropZone {
      background-color: #333;
      border-color: #666;
    }

    @media (max-width: 600px) {
      .top-bar {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
      }
      #themeToggle, #languageSelect {
        float: none;
        display: block;
        margin: 0;
      }
      .share-section a {
        display: inline-block;
        margin: 5px 8px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Top bar with Dark Mode + Language Select -->
    <div class="top-bar">
      <button id="themeToggle">Dark Mode</button>
      <select id="languageSelect">
        <option value="en">English</option>
        <option value="hi">हिन्दी</option>
        <option value="ta">தமிழ்</option>
        <option value="bn">বাংলা</option>
        <option value="mr">मराठी</option>
        <option value="te">తెలుగు</option>
        <option value="kn">ಕನ್ನಡ</option>
        <option value="ml">മലയാളം</option>
      </select>
    </div>

    <!-- Main Heading: 'Custom Image Resizer' -->
    <h1 id="heading">Custom Image Resizer</h1>

    <!-- Intro text -->
    <div class="intro-text">
      <h2 id="subHeading">Why Use Our Online Image Compressor?</h2>
      <p id="introPara">
        Our online image compressor and photo resizer makes it easy
        to reduce file sizes without losing quality. Whether you need
        to upload a signature or optimize a product photo, this free
        tool saves you time and bandwidth.
      </p>
    </div>

    <!-- Note line -->
    <p id="noteLine" class="note">
      Provide either the width &amp; height range OR the exact dimensions (in inches @ dpi).
      <br><strong>Do not fill both.</strong>
    </p>

    <div class="grid-container">
      <!-- Column 1: Image Upload -->
      <div class="form-group">
        <label id="uploadLabel" for="imageUpload">Upload Image</label>
        <input type="file" id="imageUpload" accept="image/*" />

        <!-- Drag & Drop Box -->
        <div id="dropZone">
          <p style="margin:0;">Drag &amp; Drop Your Image Here (or Click)</p>
        </div>
      </div>

      <!-- Column 2: File Size Limits -->
      <div class="form-group">
        <label id="minSizeLabel">Min File Size (KB)</label>
        <input type="number" id="minSize" placeholder="e.g., 50" />
        <label id="maxSizeLabel">Max File Size (KB)</label>
        <input type="number" id="maxSize" placeholder="e.g., 300" />
      </div>
      <!-- Column 3: Width Range -->
      <div class="form-group">
        <label id="minWidthLabel">Min Width (px)</label>
        <input type="number" id="minWidth" placeholder="e.g., 300" />
        <label id="maxWidthLabel">Max Width (px)</label>
        <input type="number" id="maxWidth" placeholder="e.g., 600" />
      </div>
      <!-- Column 4: Height Range -->
      <div class="form-group">
        <label id="minHeightLabel">Min Height (px)</label>
        <input type="number" id="minHeight" placeholder="e.g., 300" />
        <label id="maxHeightLabel">Max Height (px)</label>
        <input type="number" id="maxHeight" placeholder="e.g., 600" />
      </div>
      <!-- Column 5: Exact Dimensions -->
      <div class="form-group">
        <label id="exactDimLabel">Exact Dimensions (inches @ dpi)</label>
        <input type="text" id="dimensions" placeholder="e.g., 2x2 @300" />
      </div>
    </div>

    <!-- Resize & Download Buttons -->
    <button id="resizeBtn" disabled>Resize</button>
    <button id="downloadBtn">Download Resized Image</button>
    <!-- Hidden Canvas -->
    <canvas id="canvas" style="display: none;"></canvas>

    <!-- Note Paragraph -->
    <p id="notePara" style="font-style: italic; margin-top: 20px;">
      *Note: If you want to resize an image to a specific dimension (for example, 300×400),
      simply enter 300 in both the Min Width and Max Width fields, and 400 in both the
      Min Height and Max Height fields.
    </p>

    <!-- FAQ Section -->
    <div class="faq-section">
      <h2 id="faqHeading">Frequently Asked Questions (FAQ)</h2>

      <h3 id="faqQ1">Will compressing my image reduce its quality?</h3>
      <p id="faqA1">
        Our online image compressor does its best to maintain
        high-quality results. You can resize and compress without losing too much detail.
      </p>

      <h3 id="faqQ2">How do I resize an image without losing clarity?</h3>
      <p id="faqA2">
        Use our photo resizer feature to adjust width and height
        while preserving aspect ratio. This helps maintain image clarity.
      </p>
    </div>

    <!-- Social Media Sharing Section with icons -->
    <div class="share-section">
      <p>Loved the site? Share it among your friends!</p>
      <a id="waShare" href="#" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a> |
      <a id="tgShare" href="#" target="_blank"><i class="fab fa-telegram-plane"></i> Telegram</a> |
      <a id="igShare" href="#" target="_blank"><i class="fab fa-instagram"></i> Instagram</a> |
      <a id="rdShare" href="#" target="_blank"><i class="fab fa-reddit-alien"></i> Reddit</a> |
      <a id="genericShare" href="#" target="_blank"><i class="fas fa-share"></i> Share Link</a>
    </div>

    <!-- Link to Govt Photo Resizer -->
    <div class="other-site-link">
      <p>
        Applying for government exams?
        <a href="https://roseneinstein.github.io/govt-photo-resizer/" target="_blank">
          Check out our Govt Exams Photo Resizer
        </a>
        to see upcoming exams and resize your photo/signature <strong>automatically!</strong>
      </p>
    </div>
  </div>

  <script>
    /* ---------------------------
       1) DARK/LIGHT MODE TOGGLE
    --------------------------- */
    const themeToggle = document.getElementById('themeToggle');

    function loadTheme() {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.body.classList.add('dark-mode');
        themeToggle.textContent = 'Light Mode';
      } else {
        document.body.classList.remove('dark-mode');
        themeToggle.textContent = 'Dark Mode';
      }
    }

    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      if (document.body.classList.contains('dark-mode')) {
        localStorage.setItem('theme', 'dark');
        themeToggle.textContent = 'Light Mode';
      } else {
        localStorage.setItem('theme', 'light');
        themeToggle.textContent = 'Dark Mode';
      }
    });

    loadTheme(); // Initialize on page load

    /* ---------------------------
       2) MULTI-LINGUAL SUPPORT
       Always starts in English each time
    --------------------------- */
    const translations = {
      en: {
        heading: "Custom Image Resizer",
        subHeading: "Why Use Our Online Image Compressor?",
        introPara: "Our online image compressor and photo resizer makes it easy to reduce file sizes without losing quality...",
        noteLine: "Provide either the width & height range OR the exact dimensions (in inches @ dpi). Do not fill both.",
        uploadLabel: "Upload Image",
        minSizeLabel: "Min File Size (KB)",
        maxSizeLabel: "Max File Size (KB)",
        minWidthLabel: "Min Width (px)",
        maxWidthLabel: "Max Width (px)",
        minHeightLabel: "Min Height (px)",
        maxHeightLabel: "Max Height (px)",
        exactDimLabel: "Exact Dimensions (inches @ dpi)",
        resizeBtn: "Resize",
        downloadBtn: "Download Resized Image",
        notePara: "*Note: If you want to resize an image to a specific dimension (e.g., 300×400), just enter 300 in both Width fields and 400 in both Height fields.",
        faqHeading: "Frequently Asked Questions (FAQ)",
        faqQ1: "Will compressing my image reduce its quality?",
        faqA1: "Our online image compressor does its best to maintain high-quality results...",
        faqQ2: "How do I resize an image without losing clarity?",
        faqA2: "Use our photo resizer feature to adjust width and height while preserving aspect ratio..."
      },

      /* Your other 7 languages go here EXACTLY as you had them:
         hi, ta, bn, mr, te, kn, ml 
         (Don't remove or edit them, just keep them intact.)
      */
      hi: {
        heading: "कस्टम इमेज रीसाइज़र",
        // ...
      },
      ta: {
        heading: "கஸ்டம் இமேஜ் ரிசைசர்",
        // ...
      },
      bn: {
        heading: "কাস্টম ইমেজ রিসাইজার",
        // ...
      },
      mr: {
        heading: "कस्टम इमेज रिसायझर",
        // ...
      },
      te: {
        heading: "కస్టమ్ ఇమేజ్ రీసైజర్",
        // ...
      },
      kn: {
        heading: "ಕಸ್ಟಮ್ ಇಮೇಜ್ ರೀಸೈಝರ್",
        // ...
      },
      ml: {
        heading: "കസ്റ്റം ഇമേജ് റീസൈസർ",
        // ...
      }
    };

    function updateLanguage(lang) {
      const t = translations[lang] || translations.en;
      document.getElementById('heading').textContent      = t.heading;
      document.getElementById('subHeading').textContent  = t.subHeading;
      document.getElementById('introPara').textContent   = t.introPara;
      document.getElementById('noteLine').innerHTML      = t.noteLine;
      document.getElementById('uploadLabel').textContent = t.uploadLabel;
      document.getElementById('minSizeLabel').textContent = t.minSizeLabel;
      document.getElementById('maxSizeLabel').textContent = t.maxSizeLabel;
      document.getElementById('minWidthLabel').textContent = t.minWidthLabel;
      document.getElementById('maxWidthLabel').textContent = t.maxWidthLabel;
      document.getElementById('minHeightLabel').textContent = t.minHeightLabel;
      document.getElementById('maxHeightLabel').textContent = t.maxHeightLabel;
      document.getElementById('exactDimLabel').textContent = t.exactDimLabel;
      document.getElementById('resizeBtn').textContent    = t.resizeBtn;
      document.getElementById('downloadBtn').textContent  = t.downloadBtn;
      document.getElementById('notePara').textContent     = t.notePara;
      document.getElementById('faqHeading').textContent   = t.faqHeading;
      document.getElementById('faqQ1').textContent        = t.faqQ1;
      document.getElementById('faqA1').textContent        = t.faqA1;
      document.getElementById('faqQ2').textContent        = t.faqQ2;
      document.getElementById('faqA2').textContent        = t.faqA2;
    }

    // By default, always load English
    updateLanguage('en');

    const languageSelect = document.getElementById('languageSelect');
    languageSelect.addEventListener('change', () => {
      const chosenLang = languageSelect.value;
      updateLanguage(chosenLang);
      // No localStorage => resets to English on refresh
    });

    /* 
      3) Existing Resizer Logic
    */
    const imageUpload = document.getElementById('imageUpload');
    const minSize = document.getElementById('minSize');
    const maxSize = document.getElementById('maxSize');
    const minWidth = document.getElementById('minWidth');
    const maxWidth = document.getElementById('maxWidth');
    const minHeight = document.getElementById('minHeight');
    const maxHeight = document.getElementById('maxHeight');
    const dimensions = document.getElementById('dimensions');
    const resizeBtn = document.getElementById('resizeBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const canvas = document.getElementById('canvas');

    let resizedImageDataURL = '';

    function resetDownload() {
      downloadBtn.style.display = 'none';
      resizedImageDataURL = '';
    }

    function validateInputs() {
      if (!imageUpload.files || imageUpload.files.length === 0) return false;
      if (!minSize.value || !maxSize.value) return false;
      const rangeProvided = minWidth.value && maxWidth.value && minHeight.value && maxHeight.value;
      const exactProvided = dimensions.value;
      if (!rangeProvided && !exactProvided) return false;
      return true;
    }

    function updateResizeButton() {
      resizeBtn.disabled = !validateInputs();
    }

    [imageUpload, minSize, maxSize, minWidth, maxWidth, minHeight, maxHeight, dimensions].forEach(input => {
      input.addEventListener('input', () => {
        resetDownload();
        updateResizeButton();
      });
    });

    function dataURLSizeKB(dataURL) {
      const base64Str = dataURL.split(',')[1];
      const sizeInBytes = Math.floor((base64Str.length * 3) / 4);
      return sizeInBytes / 1024;
    }

    function getDataURLWithSizeConstraints(minKB, maxKB, callback) {
      let quality = 0.9;
      const step = 0.05;
      let dataURL = canvas.toDataURL('image/jpeg', quality);
      let sizeKB = dataURLSizeKB(dataURL);

      // Lower quality if file is too large
      while (sizeKB > maxKB && quality > 0.1) {
        quality -= step;
        dataURL = canvas.toDataURL('image/jpeg', quality);
        sizeKB = dataURLSizeKB(dataURL);
      }

      // Increase quality if file is too small
      while (sizeKB < minKB && quality < 1.0) {
        quality += step;
        if (quality > 1.0) quality = 1.0;
        dataURL = canvas.toDataURL('image/jpeg', quality);
        sizeKB = dataURLSizeKB(dataURL);
        if (quality === 1.0) break;
      }
      callback(dataURL, quality, sizeKB);
    }

    resizeBtn.addEventListener('click', function () {
      const rangeProvided = minWidth.value && maxWidth.value && minHeight.value && maxHeight.value;
      const exactProvided = dimensions.value;
      if (rangeProvided && exactProvided) {
        alert("Please provide either the width & height ranges or the exact dimensions (in inches @ dpi), not both.");
        return;
      }
      if (!validateInputs()) {
        alert('Please fill in all required fields.');
        return;
      }
      const file = imageUpload.files[0];
      const reader = new FileReader();
      reader.onload = function (event) {
        const img = new Image();
        img.onload = function () {
          let newWidth, newHeight;
          if (exactProvided) {
            const parts = dimensions.value.split('@');
            if (parts.length === 2) {
              const dims = parts[0].trim().split('x');
              if (dims.length === 2) {
                const dpi = parseInt(parts[1].trim());
                const inchesWidth = parseFloat(dims[0]);
                const inchesHeight = parseFloat(dims[1]);
                newWidth = Math.round(inchesWidth * dpi);
                newHeight = Math.round(inchesHeight * dpi);
              }
            }
          } else {
            newWidth = parseInt(minWidth.value);
            newHeight = parseInt(minHeight.value);
          }
          canvas.width = newWidth;
          canvas.height = newHeight;
          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0, newWidth, newHeight);

          getDataURLWithSizeConstraints(parseInt(minSize.value), parseInt(maxSize.value), function(dataURL, qualityUsed, finalSizeKB) {
            resizedImageDataURL = dataURL;
            downloadBtn.style.display = 'block';
            alert("Resize successful! Your image meets the size criteria. Final file size: "
              + finalSizeKB.toFixed(1)
              + " KB. Click the Download button to save your image."
            );
          });
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    });

    downloadBtn.addEventListener('click', function () {
      if (!resizedImageDataURL) return;
      const link = document.createElement('a');
      link.href = resizedImageDataURL;
      link.download = 'resized-image.jpg';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    });

    /* --- DRAG & DROP LOGIC --- */
    const dropZone = document.getElementById('dropZone');
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      dropZone.addEventListener(eventName, e => {
        e.preventDefault();
        e.stopPropagation();
      }, false);
    });
    dropZone.addEventListener('dragover', () => {
      dropZone.style.borderColor = 'var(--highlight-border)';
    });
    dropZone.addEventListener('dragleave', () => {
      dropZone.style.borderColor = 'var(--border-color)';
    });
    dropZone.addEventListener('drop', () => {
      dropZone.style.borderColor = 'var(--border-color)';
    });
    dropZone.addEventListener('drop', e => {
      const droppedFiles = e.dataTransfer.files;
      if (droppedFiles && droppedFiles.length > 0) {
        imageUpload.files = droppedFiles;
        imageUpload.dispatchEvent(new Event('input'));
      }
    });
    dropZone.addEventListener('click', () => {
      imageUpload.click();
    });

    /* ---------------------------
       4) SOCIAL MEDIA SHARE LINKS
       Using icons from Font Awesome
    --------------------------- */
    const waShare = document.getElementById('waShare');
    const tgShare = document.getElementById('tgShare');
    const igShare = document.getElementById('igShare');
    const rdShare = document.getElementById('rdShare');
    const genericShare = document.getElementById('genericShare');

    const currentURL = encodeURIComponent(window.location.href);

    // WhatsApp
    waShare.href = `https://api.whatsapp.com/send?text=Loved%20this%20site!%20Check%20it%20out:%20${currentURL}`;
    // Telegram
    tgShare.href = `https://t.me/share/url?url=${currentURL}&text=Loved%20this%20site!`;
    // Instagram (no direct link feed) => just link to Instagram
    igShare.href = 'https://instagram.com';
    // Reddit
    rdShare.href = `https://www.reddit.com/submit?url=${currentURL}&title=Loved%20this%20site!`;
    // Generic share link (just open the same URL)
    genericShare.href = window.location.href;
  </script>
</body>
</html>
